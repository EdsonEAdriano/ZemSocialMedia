<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zem</title>
    <link rel="stylesheet" href="/styles/home.css">
</head>

<body>

    <div class="sidebar">
        <div>
            <a href="#"><span class="icon">ğŸ </span> Home</a>
            <a href="#"><span class="icon">ğŸ”</span> Explore</a>
            <a href="#"><span class="icon">ğŸ””</span> Notifications</a>
            <a href="#"><span class="icon">âœ‰ï¸</span> Messages</a>
            <a href="#"><span class="icon">ğŸ”–</span> Bookmarks</a>
            <a href="#"><span class="icon">ğŸ“‹</span> Lists</a>
            <a href="#"><span class="icon">ğŸ‘¤</span> Profile</a>
            <a href="#"><span class="icon">â‹¯</span> More</a>
            <div class="post-button">Post</div>
        </div>

        <div class="profile-section">
            <img src="https://via.placeholder.com/40" alt="Foto de Perfil" id="profile-picture">
            <div class="profile-name">
                <span id="profile-fullname">Profile Name</span>
                <span id="profile-username">@user</span>
            </div>
            <button id="logout-button">Sair</button>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Post Box -->
        <div class="post-box">
            <textarea placeholder="What's happening?" rows="3"></textarea>
            <input type="text" placeholder="Image URL (optional)" class="image-url-input">
            <div class="post-actions">
                <button class="post-button">Post</button>
            </div>
        </div>

        <!-- Posts -->
        <div class="post">
            <div class="profile-info">
                <img src="https://via.placeholder.com/40" alt="Profile Picture">
                <div>
                    <span class="name">Profile Name</span> <span class="username">@username Â· 32m</span>
                </div>
            </div>
            <div class="content">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Hic nihil fuit, quod quaereremus.
            </div>
            <div class="actions">
                <span>ğŸ’¬ 568k</span>
                <span>ğŸ” 75k</span>
                <span>â¤ï¸ 157</span>
                <span>ğŸ”—</span>
            </div>
        </div>

        <div class="post">
            <div class="profile-info">
                <img src="https://via.placeholder.com/40" alt="Profile Picture">
                <div>
                    <span class="name">Profile Name</span> <span class="username">@username Â· 32m</span>
                </div>
            </div>
            <div class="content">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Hic nihil fuit, quod quaereremus.
            </div>
            <div class="actions">
                <span>ğŸ’¬ 568k</span>
                <span>ğŸ” 75k</span>
                <span>â¤ï¸ 157</span>
                <span>ğŸ”—</span>
            </div>
        </div>
    </div>

    <!-- Trends Section -->
    <div class="trends">
        <div class="search-bar">
            <input type="text" placeholder="Search Posts">
        </div>

        <div class="trends-for-you">
            <h2>Trends for you</h2>
            <div class="trend">
                <p>Trending in your country</p>
                <p><strong>Profile Name</strong></p>
                <p>578k Posts</p>
            </div>
            <div class="trend">
                <p>Trending in your country</p>
                <p><strong>Profile Name</strong></p>
                <p>578k Posts</p>
            </div>
            <div class="trend">
                <p>Trending in your country</p>
                <p><strong>Profile Name</strong></p>
                <p>578k Posts</p>
            </div>
            <div class="trend">
                <p>Trending in your country</p>
                <p><strong>Profile Name</strong></p>
                <p>578k Posts</p>
            </div>
            <div class="trend">
                <p>Trending in your country</p>
                <p><strong>Profile Name</strong></p>
                <p>578k Posts</p>
            </div>
        </div>

        <div class="who-to-follow">
            <h2>Who to follow</h2>
            <div class="follow-suggestion">
                <img src="https://via.placeholder.com/40" alt="Profile Picture">
                <div>
                    <p>Profile Name</p>
                    <p>@username</p>
                </div>
                <button>Follow</button>
            </div>
            <div class="follow-suggestion">
                <img src="https://via.placeholder.com/40" alt="Profile Picture">
                <div>
                    <p>Profile Name</p>
                    <p>@username</p>
                </div>
                <button>Follow</button>
            </div>
        </div>

        <div class="messages">
            <h2>Messages</h2>
        </div>
    </div>

    <!-- Adicione este cÃ³digo no final do body, antes dos scripts -->
    <div id="imageModal" class="modal">
        <span class="close">&times;</span>
        <img class="modal-content" id="modalImage">
    </div>

</body>
<script src="../services/database.js"></script>
<script src="../services/users.js"></script>
<script src="../services/posts.js"></script>
<script src="../services/session.js"></script>
<script src="/scripts/appendPosts.js"></script>
<script>
    initDB().then(() => {
        insertDefaultData().then(() => {
            migrateExistingPosts().then(() => {
                const loggedInUser = getLoggedInUser();
                if (!loggedInUser) {
                    window.location.href = '/pages/login.html';
                } else {
                    appendPosts();
                }
            }).catch(error => console.error("Erro na migraÃ§Ã£o:", error));
        });
    });
</script>

</html>